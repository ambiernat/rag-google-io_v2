# ================================
# HPO: Dense + CrossEncoder Rerank
# ================================

experiment:
  name: "dense_rerank_hpo"
  tracking_uri: "file:../mlruns"
  n_trials: 20
  direction: "maximize"

data:
  ground_truth:
    dir: "data/eval"
    prefix: "ground_truth_gpt-5-nano"
    results_dir: "data/eval/results/hpo"


retrieval:
  type: "dense"
  collection_name: "google-io-transcripts-dense"

  retrieve_k:
    choices: [20, 30, 50, 75, 100]

reranker:
  type: "cross_encoder"

  rerank_k:
    choices: [5, 10]

  models:
    - "cross-encoder/ms-marco-TinyBERT-L-2-v2"
    - "cross-encoder/ms-marco-MiniLM-L-6-v2"
    - "BAAI/bge-reranker-base"

objective:
  primary_metric: "recall@5"
  cost_penalty:
    enabled: true
    retrieve_k_weight: 0.1

compute:
  device: "cpu"          # cpu | cuda
  batch_size: 16

logging:
  level: "INFO"

artifacts:
  save_best_params: true
  save_best_results: true
  save_study_summary: true
